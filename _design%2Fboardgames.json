{
    "key": "_design/boardgames",
    "doc": {
        "language": "javascript",
        "_rev": "1-b6cdad45c5c7de32653e2264e47003d1",
        "_id": "_design/boardgames",
        "views": {
            "boardgames": {
                "map": "function(doc) {\n\tif (doc.doctype==\"thing\") {\n\t\tif (doc[\"@type\"] == \"boardgame\") {\n\n\t\t\tvar name = new String();\n\n\t\t\tif (doc.name[\"@value\"]) {\n\t\t\t\tname = doc.name[\"@value\"];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var i in doc.name) {\n\t\t\t\t\tif (doc.name[i][\"@type\"] == \"primary\") {\n\t\t\t\t\t\tname = doc.name[i][\"@value\"];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar categories = new Array();\n\t\t\tvar mechanics = new Array();\n\t\t\tvar designers = new Array();\n\n\t\t\tfor (var i in doc.link) {\n\t\t\t\tswitch(doc.link[i][\"@type\"]) {\n\t\t\t\t\tcase \"boardgamecategory\":\n\t\t\t\t\t\tcategories.push(doc.link[i][\"@value\"]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"boardgamemechanic\":\n\t\t\t\t\t\tmechanics.push(doc.link[i][\"@value\"]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"boardgamedesigner\":\n\t\t\t\t\t\tdesigners.push(doc.link[i][\"@value\"]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\temit(doc._id, {\n\t\t\t\tbgg_id: doc[\"@id\"],\n\t\t\t\tname: name,\n\t\t\t\tdescription: doc.description,\n\t\t\t\tminplayers: doc.minplayers[\"@value\"],\n\t\t\t\tmaxplayers: doc.maxplayers[\"@value\"],\n\t\t\t\tminplaytime: doc.minplaytime[\"@value\"],\n\t\t\t\tplayingtime: doc.playingtime[\"@value\"],\n\t\t\t\tmaxplaytime: doc.maxplaytime[\"@value\"],\n\t\t\t\tminage: doc.minage[\"@value\"],\n\t\t\t\tyear: doc.yearpublished[\"@value\"],\n\t\t\t\tcategories: categories,\n\t\t\t\tmechanics: mechanics,\n\t\t\t\tdesigners: designers\n\t\t\t});\n\t\t}\n\t}\n}"
            }
        }
    },
    "id": "_design/boardgames",
    "value": {
        "rev": "1-b6cdad45c5c7de32653e2264e47003d1"
    }
}